name: update

on: 
  schedule:
    - cron: "0 4 * * *"
  push:
    branches: [ "shuyuan" ]
    paths:
      - 'xsreader/new/sources.json'
  pull_request:
    branches: [ "shuyuan" ]
    paths:
      - 'xsreader/new/sources.json'
  workflow_dispatch:
    inputs:
      target_branch:
        description: 'Target branch'
        required: true

jobs:
  build:
    runs-on: ubuntu-latest

    steps:
      - name: Checkout repository
        uses: actions/checkout@v3
      - name: Set up Python 3.10
        uses: actions/setup-python@v3
        with:
          python-version: "3.10"
      # 其他步骤...
      - name: Send Telegram notification
        run: |
          curl "https://api.telegram.org/bot${{ secrets.TELEGRAM_BOT_TOKEN }}/sendMessage" \
          -d "chat_id=${{ secrets.TELEGRAM_CHAT_ID }}" \
          -d "text=书源更新完成!分支：${{ github.event.inputs.target_branch }}"   
